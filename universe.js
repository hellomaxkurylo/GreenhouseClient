class GreenhouseClient{constructor(t){this.apiEndpoint=t,this.dataType=this.determineDataType(t)}determineDataType(t){return t.includes("/departments")?"departments":t.includes("/jobs")?"jobs":null}async fetchData(){if(!this.apiEndpoint||!this.dataType)return;const t={method:"GET",redirect:"follow",headers:{"Content-Type":"application/json"}};try{const e=await fetch(this.apiEndpoint,t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();if("departments"===this.dataType&&!n.departments)return;if("jobs"===this.dataType&&!n.jobs)return;"departments"===this.dataType?this.populateDepartments(n.departments):this.populateJobs(n.jobs)}catch(t){}}populateDepartments(t){const e=document.querySelector("[gw-departments-container]");if(!e)return;if(!t||0===t.length)return void(e.textContent="No departments found.");const n=document.querySelector("[gw-departments-item]");n&&(n.remove(),t.forEach((t=>{const o=n.cloneNode(!0);if(o.style.display="",!t.jobs||0===t.jobs.length)return void(o.style.display="none");const s=o.querySelector("[gw-departments-quantity]");s&&(s.textContent="("+t.jobs.length+")");const r=o.querySelector("[gw-departments-title]");r&&(r.textContent=t.name),e.appendChild(o),t.jobs&&t.jobs.length>0&&this.populateJobs(t.jobs,o.querySelector("[gw-jobs-container]"))})))}populateJobs(t,e=document.querySelector("[gw-jobs-container]")){if(!e)return;const n=e.querySelector("[gw-jobs-item]");n&&(n.remove(),t.forEach((t=>{const o=n.cloneNode(!0);o.style.display="";const s=o.querySelector("[gw-jobs-title]");s&&(s.textContent=t.title);const r=o.querySelector("[gw-jobs-location]");r&&t.location&&(r.textContent=t.location.name);const a=o.querySelector("[gw-jobs-apply]");a&&(a.href=t.absolute_url,a.target="_blank"),e.appendChild(o)})))}static init(t){const e=new GreenhouseClient(t);document.addEventListener("DOMContentLoaded",(()=>{("departments"===e.dataType&&document.querySelector("[gw-departments-item]")||"jobs"===e.dataType&&document.querySelector("[gw-jobs-item]"))&&e.fetchData()}))}}window.runGreenhouseClient=GreenhouseClient.init;
